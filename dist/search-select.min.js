/*!
 * search-select
 * 
 * Version: 1.0.0 - 2016-09-25T04:22:37.590Z
 * License: MIT
 */
!function(){"use strict";function e(){function e(e){function t(){if(!m(y.ngModel)){n(),o();for(var e=0;e<S.length;e++)s(e),c(e),r(e);y.filteredOptions=S,l()}}function n(){if(!m(y.idKey)&&!y.options[0].hasOwnProperty(y.idKey))throw"Error: No option attribute matched with specified idKey."}function o(){m(y.idKey)&&(y.idKey="id")}function s(e){S[e].ss_index=e}function c(e){null!==y.ngModel&&y.ngModel[y.idKey]===S[e][y.idKey]&&(y.ngModel=S[e],y.selectedIndex=e)}function r(e){for(var t=S[e],n="",o=0;o<x.length;o++){var s=x[o];m(t[s])||(n+=t[s]+" ")}if(""===n)throw"Error: No option attribute matched with any key in labelKeys.";n=n.slice(0,-1),S[e].ss_display_name=n}function i(t){y.ngModel=t,y.selectedIndex=t.ss_index,e.triggerNgChange(t),l()}function l(){return y.searching=!1,null===y.selectedIndex?void(y.searchString=""):void(m(S[y.selectedIndex])||(y.searchString=S[y.selectedIndex].ss_display_name))}function a(){angular.element(document).on("keydown",b.run),angular.element(document).on("keyup",g),u(),p()}function d(){y.keyboardFocusIndex=null,angular.element(document).off("keydown",b.run),angular.element(document).off("keyup",g),l()}function p(){if(""===y.searchString||m(y.searchString))return void(y.filteredOptions=S);for(var e=[],t=y.searchString.toLowerCase(),n=0;n<S.length;n++){var o=S[n].ss_display_name;if(o.toLowerCase().indexOf(t)!==-1){var s=angular.copy(S[n]);e.push(s)}}y.filteredOptions=e}function u(){y.searching=!0,y.searchString=""}function h(){return 0!==Object.keys(y.ngModel).length}function m(e){return"undefined"==typeof e}function f(){function t(){0!==y.keyboardFocusIndex&&null!==y.keyboardFocusIndex&&(y.keyboardFocusIndex-=1,c(!1))}function n(){return null===y.keyboardFocusIndex?(y.keyboardFocusIndex=0,c(!0),void e.$apply()):void(y.keyboardFocusIndex>=y.filteredOptions.length-1||(y.keyboardFocusIndex+=1,c(!0)))}function o(e){null!==y.keyboardFocusIndex&&(i(y.filteredOptions[y.keyboardFocusIndex]),e.target.blur(),v=!0)}function s(e){e.target.blur(),v=!0}function c(e){var t="option-list",n="option-list-item-"+y.keyboardFocusIndex,o=e?1:-1,s="option-list-item-"+(y.keyboardFocusIndex+o),c=document.getElementById(t),r=document.getElementById(n),i=document.getElementById(s)||r;i.offsetTop>=c.offsetHeight+c.scrollTop&&(c.scrollTop=i.offsetTop-c.offsetHeight+i.offsetHeight),c.scrollTop>i.offsetTop&&(c.scrollTop=i.offsetTop)}this.run=function(c){if(v!==!1){var r=c.keyCode?c.keyCode:c.which;v=!1,38===r&&t(),40===r&&n(),13===r&&o(c),27===r&&s(c),e.$apply()}}}function g(e){v=!0}var y=this,b=new f,x=y.labelKeys.split(" "),S=angular.copy(y.options),v=!0;y.filteredOptions={},y.keyboardFocusIndex=null,y.searching=!1,y.searchString="",y.selectedIndex=null,y.ssBlur=d,y.ssFocus=a,y.isOptionSelected=h,y.searchOptions=p,y.selectOption=i,e.$watch(function(){return y.options},function(e,n){S=angular.copy(y.options),t()},!0)}var t={require:"ngModel",restrict:"EA",templateUrl:"search-select.html",scope:{ngModel:"=",options:"=",idKey:"@",labelKeys:"@",placeholderText:"@",fontAwesomeIcon:"@"},controller:e,controllerAs:"searchSelect",bindToController:!0,link:function(e,t,n,o){e.triggerNgChange=function(e){o.$setViewValue(e)}}};return t}angular.module("searchSelect",[]).directive("searchSelect",e)}(),angular.module("searchSelect").run(["$templateCache",function(e){e.put("search-select.html",'<div class="search-select-container"><div class="ss-input-container" ng-class="{\'container-expanded\': searchSelect.isOptionSelected()}"><div class="cover-base" ng-class="{\'cover-expanded\': searchSelect.isOptionSelected()}">{{searchSelect.placeholderText}}</div><input name="search_string" type="text" class="input-base" placeholder="{{searchSelect.placeholderText}}" autocomplete="off" ng-class="{\'input-expanded\': searchSelect.isOptionSelected()}" ng-model="searchSelect.searchString" ng-focus="searchSelect.ssFocus()" ng-blur="searchSelect.ssBlur()" ng-keyup="searchSelect.searchOptions()" ng-required="true"> <i class="icon-base fa" ng-class="{\'icon-expanded\': searchSelect.isOptionSelected(), \'{{searchSelect.fontAwesomeIcon}}\': true}"></i></div><div class="results-container" ng-show="searchSelect.searching"><ul id="option-list" class="option-list" ng-show="searchSelect.filteredOptions.length > 0"><li id="option-list-item-{{$index}}" class="option-list-item" ng-class="{\'kb-focused\': searchSelect.keyboardFocusIndex === $index}" ng-repeat="option in searchSelect.filteredOptions track by $index" ng-mousedown="searchSelect.selectOption(option)">{{option.ss_display_name}}</li></ul></div></div>'),e.put("demo_files/index.html",'<!doctype html><html ng-app="demo"><head><meta charset="utf-8"><title>AngularJS1 Search Select demo</title><link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.css"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css"><link rel="stylesheet" href="search-select.css"><link rel="stylesheet" href="demo.css"></head><body><div class="container" ng-controller="MainController as main"><h1 class="text-muted">Demo</h1><div class="instructions usage row"><h3>Instructions:</h3><p class="title">* Mouse Controls</p><p>Move with the mouse, click an option to select, click away from the dropdown to close.</p><p class="title">* Keyboard Controls</p><p>Up/Down to move, Enter to select, Escape to close.</p><p class="title">* Searching</p><p>Type into the input to narrow down the option list.</p></div><div class="usage row"><h3>Basic example:</h3><pre>\n  &lt;search-select\n    ng-model="main.currentFruitOption"\n    options="main.fruitOptions"\n    label-keys="name"\n    placeholder-text="Select Fruit"\n    font-awesome-icon="fa-lemon-o"&gt;\n  &lt;/search-select&gt;\n</pre><h3>Results in:</h3><search-select ng-model="main.currentFruitOption" options="main.fruitOptions" label-keys="name" placeholder-text="Select Fruit" font-awesome-icon="fa-lemon-o"></search-select><h4>Selected Option: {{main.currentFruitOption}}</h4></div><div class="usage row"><h3>Example with multiple label-keys:</h3><pre>\n  &lt;search-select\n    ng-model="main.currentUserOption"\n    options="main.userOptions"\n    label-keys="first_name last_name"\n    placeholder-text="Select User"\n    font-awesome-icon="fa-user"&gt;\n  &lt;/search-select&gt;\n</pre><h3>Results in:</h3><search-select ng-model="main.currentUserOption" options="main.userOptions" label-keys="first_name last_name" placeholder-text="Select User" font-awesome-icon="fa-user"></search-select><h4>Selected Option: {{main.currentUserOption}}</h4></div><div class="usage row"><h3>Example with pre-selected option and custom idKey:</h3><pre>\n  &lt;search-select\n    ng-model="main.currentVideoGameCharacterOption"\n    options="main.videoGameCharacterOptions"\n    id-key="characterId"\n    label-keys="name"\n    placeholder-text="Select Character"\n    font-awesome-icon="fa-user"&gt;\n  &lt;/search-select&gt;\n</pre><h3>Results in:</h3><search-select ng-model="main.currentVideoGameCharacterOption" options="main.videoGameCharacterOptions" id-key="characterId" label-keys="name" placeholder-text="Select Character" font-awesome-icon="fa-user"></search-select><h4>Selected Option: {{main.currentVideoGameCharacterOption}}</h4></div><div class="bottom-spacer"></div></div><script src="bower_components/angular/angular.js"></script><script src="bower_components/angular-animate/angular-animate.js"></script><script src="search-select.js"></script><script src="demo.js"></script></body></html>')}]);