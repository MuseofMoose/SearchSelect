/*!
 * search-select
 * 
 * Version: 2.0.0 - 2017-08-11T19:46:42.277Z
 * License: MIT
 */
!function(){"use strict";function e(){function e(e,t,n){function s(){w=angular.copy(x.options),i(),o(),r();for(var e=0;e<w.length;e++)a(e),c(e),l(e);x.filteredOptions=w,p()}function i(){if(S(x.currentOption))throw new Error("currentOption attribute is undefined.");if(!O(x.idKey)&&!x.options[0].hasOwnProperty(x.idKey))throw new Error("No option attribute matched with specified idKey.")}function o(){O(x.idKey)&&(x.idKey="id")}function r(){return null!==x.currentOption&&0!==Object.keys(x.currentOption).length?void(x.isOptionSelected=!0):void(x.isOptionSelected=!1)}function a(e){w[e].ss_index=e}function c(e){x.isOptionSelected&&x.currentOption[x.idKey]===w[e][x.idKey]&&(x.currentOption=w[e],x.selectedIndex=e)}function l(e){for(var n=w[e],s="",i=0;i<k.length;i++){var o=k[i];S(n[o])||(s+=n[o]+" ")}if(""===s)throw new Error("No option attribute matched with any key in labelKeys.");s=s.slice(0,-1),w[e].ss_display_name=s,w[e].ss_display_html=t(s)}function d(t){x.currentOption=t,x.selectedIndex=t.ss_index,x.isOptionSelected=!0,e.triggerNgChange(t),p()}function p(){return x.searching=!1,null===x.selectedIndex?void(x.searchString=""):void(x.searchString=w[x.selectedIndex].ss_display_name)}function u(){x.disabled||(n.on("keydown",_.run),n.on("keyup",y),h(),f())}function h(){x.searching=!0,x.searchString=""}function m(){n.off("keydown",_.run),n.off("keyup",y),p()}function f(e){if(!v(e)){if(x.keyboardFocusIndex=0,""===x.searchString||S(x.searchString))return void(x.filteredOptions=w);for(var t=[],n=x.searchString.toLowerCase(),s=0;s<w.length;s++){var i=w[s].ss_display_name,o=i.toLowerCase().indexOf(n);if(o!==-1){var r=angular.copy(w[s]),a=r.ss_display_name.substring(0,o),c=r.ss_display_name.substring(o,o+n.length),l=r.ss_display_name.substring(o+n.length);r.ss_display_html=b(a,c,l),t.push(r)}}x.filteredOptions=t}}function g(){function t(e){e.preventDefault(),0!==x.keyboardFocusIndex&&null!==x.keyboardFocusIndex&&(x.keyboardFocusIndex-=1,o(!1))}function n(e){e.preventDefault(),x.keyboardFocusIndex>=x.filteredOptions.length-1||(x.keyboardFocusIndex+=1,o(!0))}function s(e){e.preventDefault(),null!==x.keyboardFocusIndex&&(d(x.filteredOptions[x.keyboardFocusIndex]),e.target.blur(),I=!0)}function i(e){e.preventDefault(),e.target.blur(),I=!0}function o(e){var t="option-list",n="option-list-item-"+x.keyboardFocusIndex,s=e?1:-1,i="option-list-item-"+(x.keyboardFocusIndex+s),o=document.getElementById(t),r=document.getElementById(n),a=document.getElementById(i)||r;a.offsetTop>=o.offsetHeight+o.scrollTop&&(o.scrollTop=a.offsetTop-o.offsetHeight+a.offsetHeight),o.scrollTop>a.offsetTop&&(o.scrollTop=a.offsetTop)}this.run=function(o){if(I!==!1){var r=o.keyCode?o.keyCode:o.which;if(I=!1,38===r)t(o);else if(40===r)n(o);else if(13===r)s(o);else{if(27!==r)return;i(o)}e.$apply()}}}function b(e,n,s){var i='<span class="search-bold">'+n+"</span>";return t(e+i+s)}function y(e){I=!0}function S(e){return"undefined"==typeof e}function O(e){return!(!S(e)&&""!==e.trim())}function v(e){return 38===e||40===e||13===e||27===e}var w,k,x=this,_=new g,I=!0;this.$onInit=function(){k=x.labelKeys.split(" "),x.filteredOptions={},x.isOptionSelected=!1,x.keyboardFocusIndex=null,x.searching=!1,x.searchString="",x.selectedIndex=null,x.searchOptions=f,x.selectOption=d,x.ssBlur=m,x.ssFocus=u,e.$watch(function(){return x.options},function(e,t){s()},!0)}}var t={require:"ngModel",restrict:"E",templateUrl:"search-select.html",controller:e,controllerAs:"searchSelect",scope:{currentOption:"=ngModel",options:"=",disabled:"=?",required:"=?",idKey:"@",labelKeys:"@",placeholderText:"@",fontAwesomeIcon:"@"},bindToController:!0,link:function(e,t,n,s){e.triggerNgChange=function(e){s.$setViewValue(e)}}};return t}angular.module("searchSelect",["ngSanitize"]).directive("searchSelect",e)}(),angular.module("searchSelect").run(["$templateCache",function(e){e.put("search-select.html",'<div class="search-select-container" ng-class="{\'disabled\': searchSelect.disabled}"><div class="ss-input-container" ng-class="{\'container-expanded\': searchSelect.isOptionSelected}"><div class="cover-base" ng-class="{\'cover-expanded\': searchSelect.isOptionSelected}">{{searchSelect.placeholderText}}</div><input name="search_string" type="text" class="input-base" placeholder="{{searchSelect.placeholderText}}" autocomplete="off" ng-class="{\'input-expanded\': searchSelect.isOptionSelected}" ng-model="searchSelect.searchString" ng-focus="searchSelect.ssFocus()" ng-keyup="searchSelect.searchOptions($event.keyCode)" ng-blur="searchSelect.ssBlur()" ng-disabled="searchSelect.disabled" ng-required="searchSelect.required"> <i class="icon-base fa" ng-class="{\'icon-expanded\': searchSelect.isOptionSelected, \'{{searchSelect.fontAwesomeIcon}}\': true}"></i></div><div class="results-container" ng-show="searchSelect.searching"><ul id="option-list" class="option-list" ng-show="searchSelect.filteredOptions.length > 0"><li id="option-list-item-{{$index}}" class="option-list-item" ng-class="{\'kb-focused\': searchSelect.keyboardFocusIndex === $index}" ng-repeat="option in searchSelect.filteredOptions track by $index" ng-mousedown="searchSelect.selectOption(option)" ng-bind-html="option.ss_display_html"></li></ul></div></div>'),e.put("demo_files/index.html",'<!doctype html><html ng-app="demo"><head><meta charset="utf-8"><title>AngularJS1 Search Select demo</title><link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.css"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css"><link rel="stylesheet" href="search-select.css"><link rel="stylesheet" href="demo.css"></head><body><div class="container" ng-controller="MainController as main"><h1><strong>Search Select 2.0.0</strong> Demo</h1><div ng-init="toggle = false;"><button ng-click="toggle = !toggle">Show Instructions</button><div ng-if="toggle" class="instructions usage row"><h3>Instructions:</h3><p class="title">* Mouse Controls</p><p>Move with the mouse, click an option to select, click away from the dropdown to close.</p><p class="title">* Keyboard Controls</p><p>Up/Down to move, Enter to select, Escape to close.</p><p class="title">* Searching</p><p>Type into the input to narrow down the option list.</p></div></div><div class="usage row"><h3>Basic example:</h3><pre>\n  &lt;search-select\n    ng-model="main.currentFruitOption"\n    options="main.fruitOptions"\n    label-keys="name"\n    placeholder-text="Select Fruit"\n    font-awesome-icon="fa-lemon-o"&gt;\n  &lt;/search-select&gt;\n</pre><h3>Results in:</h3><search-select ng-model="main.currentFruitOption" options="main.fruitOptions" label-keys="name" placeholder-text="Select Fruit" font-awesome-icon="fa-lemon-o"></search-select><h4>Selected Option: {{main.cleanOption(main.currentFruitOption)}}</h4></div><div class="usage row"><h3>Multiple label-keys and Disabling:</h3><h5>Controller:</h5><pre>\n  vm.disabled = false;\n</pre><h5>HTML:</h5><pre>\n  &lt;button ng-click="main.disabled = !main.disabled"&gt;\n    Toggle Disable Value\n  &lt;/button&gt;\n\n  &lt;search-select\n    ng-model="main.currentUserOption"\n    options="main.userOptions"\n    label-keys="first_name last_name"\n    placeholder-text="Select User"\n    font-awesome-icon="fa-user"\n    disabled="main.disabled"&gt;\n  &lt;/search-select&gt;\n</pre><h3>Results in:</h3><button ng-click="main.disabled = !main.disabled">Toggle Disable Value</button><search-select ng-model="main.currentUserOption" options="main.userOptions" label-keys="first_name last_name" placeholder-text="Select User" font-awesome-icon="fa-user" disabled="main.disabled"></search-select><h4>Selected Option: {{main.cleanOption(main.currentUserOption)}}</h4><h4>Disabled: {{main.disabled}}</h4></div><div class="usage row"><h3>Pre-selected option and Custom idKey:</h3><h5>Controller:</h5><pre>\n  vm.currentVideoGameCharacterOption = { characterId: 6, name: \'Sonic\', weapon: \'Speed\' }\n</pre><h5>HTML:</h5><pre>\n  &lt;search-select\n    ng-model="main.currentVideoGameCharacterOption"\n    options="main.videoGameCharacterOptions"\n    id-key="characterId"\n    label-keys="name"\n    placeholder-text="Select Character"\n    font-awesome-icon="fa-user"&gt;\n  &lt;/search-select&gt;\n</pre><h3>Results in:</h3><search-select ng-model="main.currentVideoGameCharacterOption" options="main.videoGameCharacterOptions" id-key="characterId" label-keys="name" placeholder-text="Select Character" font-awesome-icon="fa-user"></search-select><h4>Selected Option: {{main.cleanOption(main.currentVideoGameCharacterOption)}}</h4></div><div class="bottom-spacer"></div></div><script src="bower_components/angular/angular.js"></script><script src="bower_components/angular-animate/angular-animate.js"></script><script src="bower_components/angular-sanitize/angular-sanitize.js"></script><script src="search-select.js"></script><script src="demo.js"></script></body></html>')}]);